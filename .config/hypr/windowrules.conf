
# Blood, sweat and tears went into this config


## IDLE INHIBIT (media / browsers)
## ─────────────────────────────────────────────
windowrule = idle_inhibit focus, match:class ^(mpv)$,
windowrule = idle_inhibit focus, match:class ^(smplayer)$
windowrule = idle_inhibit focus, match:class ^([Ss]potify)$
windowrule = idle_inhibit focus, match:class ^(zen|zen-browser|zen-alpha)$


## BROWSER & SPOTIFY PICTURE-IN-PICTURE 
## ─────────────────────────────────────────────
windowrule = tag -hyde_picture_in_picture, match:title ^((?i)picture[-\s]?in[-\s]?picture.*)$

# TODO: across workspace sync issue
windowrule {
    name        = pip_windows
    match:title = ^((?i)picture[-\s]?in[-\s]?picture.*)$
    float       = true
    pin         = true
    move        = (monitor_w*.73) (monitor_h*.72)
    size        = (monitor_w*.25) (monitor_h*.25)
}

# same as above, but for spotify mini player
windowrule {
    name        = chromium_pip
    match:class = ^((?i)chromium[-\s]browser)
    float       = true
    pin         = true
    move        = (monitor_w*.73) (monitor_h*.72)
    size        = (monitor_w*.25) (monitor_h*.25)
}

## SPOTIFY
## ─────────────────────────────────────────────

# Main window
windowrule = tile on, opacity 0.80 0.70, match:class ^([Ss]potify)$
### Spotify dialogs / popups (excluding PiP which is handled above)
windowrule = float on, match:class ^([Ss]potify)$, match:title ^(Spotify Settings|Edit playlist)$
windowrule = center on, match:class ^([Ss]potify)$, match:float true
# fix for popupLyrics not updating across workspaces
windowrule = render_unfocused on, match:class ^([Ss]potify)$


## ZEN BROWSER
## ─────────────────────────────────────────────

# Main window 
windowrule = opacity 0.90 0.80, match:class ^(zen|zen-browser|zen-alpha)$
### Browser dialogs (excluding PiP which is handled above)
windowrule = float on, match:class ^(zen|zen-browser|zen-alpha)$, match:title ^(Save.*|Open.*|File.*|Select.*)$ 
windowrule = center on, size 700 600, match:float true


## KITTY
## ─────────────────────────────────────────────

# Normal kitty
windowrule = tile on, opacity 0.90 0.80, match:class ^(kitty)$
### Floating kitty
windowrule = float on, center on, size 60% 60%, match:class ^(kitty-floating)$


## DOLPHIN
## ─────────────────────────────────────────────

# Main window
windowrule = tile on, opacity 0.80 0.70, match:class ^(org.kde.dolphin)$
### Dolphin dialogs / progress
windowrule = float on, match:class ^(org.kde.dolphin)$, match:title ^(Copying.*|Moving.*|Deleting.*|Properties.*|Progress.*|Choose.*)$
windowrule = center on, match:class ^(org.kde.dolphin)$, match:float true


## MEDIA PLAYERS
## ─────────────────────────────────────────────
windowrule = tile on, opacity 1.0 1.0, match:class ^(mpv|smplayer)$
### SMPlayer dialogs
windowrule = float on, match:class ^(smplayer)$, match:title ^(Preferences|Open)$
windowrule = center on, match:class ^(smplayer)$, match:float true


## GENERIC DIALOGS
## ─────────────────────────────────────────────
windowrule = float on, match:modal true
windowrule = center on, match:modal true
windowrule = opacity 1.0 override, match:modal true


## AUTH / SYSTEM DIALOGS
## ─────────────────────────────────────────────
windowrule = float on, match:class ^(org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1)$
windowrule = center on, match:class ^(org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1)$
windowrule = opacity 1.0 override, match:class ^(org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1)$

windowrule = float on, match:class ^(xdg-desktop-portal-gtk)$
windowrule = center on, match:class ^(xdg-desktop-portal-gtk)$


## FULLSCREEN SAFETY
## ─────────────────────────────────────────────
windowrule = opacity 1.0 override, match:fullscreen true 


## STSTEM TRAY FLOATING APPS
## ─────────────────────────────────────────────
windowrule = center on, size 600 480, match:tag hyde_floating_apps
# for mega async (not floating for some reason)
windowrule = float on, center on, stay_focused on, size 350 500, match:title ^(MEGAsync)$

## LAYER RULES
## ─────────────────────────────────────────────
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0, match:namespace rofi

layerrule = blur on, match:namespace notifications
layerrule = ignore_alpha 0, match:namespace notifications

layerrule = blur on, match:namespace swaync-notification-window
layerrule = ignore_alpha 0, match:namespace swaync-notification-window

layerrule = blur on, match:namespace swaync-control-center
layerrule = ignore_alpha 0, match:namespace swaync-control-center

layerrule = blur on, match:namespace logout_dialog



